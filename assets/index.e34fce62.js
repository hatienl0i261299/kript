var z=Object.defineProperty,V=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var H=(e,o,n)=>o in e?z(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,A=(e,o)=>{for(var n in o||(o={}))K.call(o,n)&&H(e,n,o[n]);if(B)for(var n of B(o))U.call(o,n)&&H(e,n,o[n]);return e},S=(e,o)=>V(e,G(o));import{C as L,W as P,c as x,j as D,s as F,r as g,u as j,a as J,L as X,p as R,R as Y,b as k,d as Z,e as Q,B as ee}from"./vendor.05acb65c.js";const te=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};te();const ne={version:"0.8.7+commit.e28d00a7"},ae="Solidity",oe={abi:[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"from",type:"address"},{indexed:!1,internalType:"address",name:"receiver",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"string",name:"message",type:"string"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"},{indexed:!1,internalType:"string",name:"keyword",type:"string"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address payable",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"message",type:"string"},{internalType:"string",name:"keyword",type:"string"}],name:"addToBlockchain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decreaseCounter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllTransactions",outputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"message",type:"string"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"string",name:"keyword",type:"string"}],internalType:"struct Transactions.TransferStruct[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCounter",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTransactionCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"increaseCounter",outputs:[],stateMutability:"nonpayable",type:"function"}],devdoc:{kind:"dev",methods:{},version:1},userdoc:{kind:"user",methods:{},version:1}},re={compilationTarget:{"test.sol":"Transactions"},evmVersion:"london",libraries:{},metadata:{bytecodeHash:"ipfs"},optimizer:{enabled:!1,runs:200},remappings:[]},se={"test.sol":{keccak256:"0x4ffb65f5da42f4e082bcd6ff66c70860936840f2c45a5ab6d6113ebe24d8d32b",license:"Unlicense",urls:["bzz-raw://32747afbdbb71172451c28766951caf227972c9213da50bc19d1e12e31eeea4c","dweb:/ipfs/QmdtMujgXnuvFLiqoGnmTM9YTJZ82xYNd3nrZE1Jimm4s3"]}},ie=1;var ce={compiler:ne,language:ae,output:oe,settings:re,sources:se,version:ie};const le={version:"0.8.7+commit.e28d00a7"},ue="Solidity",de={abi:[{inputs:[],name:"AuctionAlreadyEnded",type:"error"},{inputs:[{internalType:"uint256",name:"highestBid",type:"uint256"}],name:"BidNotHighEnough",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"highestBid",type:"address"},{indexed:!1,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"string",name:"image",type:"string"},{indexed:!1,internalType:"string",name:"info",type:"string"},{indexed:!1,internalType:"uint256",name:"endTime",type:"uint256"}],name:"transferEvent",type:"event"},{inputs:[{internalType:"uint256",name:"auctionID",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"Bid",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"image",type:"string"},{internalType:"string",name:"info",type:"string"},{internalType:"uint256",name:"endTime",type:"uint256"}],name:"addNewAuction",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"auctionCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"auctions",outputs:[{internalType:"uint256",name:"auctionID",type:"uint256"},{internalType:"address",name:"highestBid",type:"address"},{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"image",type:"string"},{internalType:"string",name:"info",type:"string"},{internalType:"uint256",name:"endTime",type:"uint256"},{internalType:"bool",name:"isEnded",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"auctionID",type:"uint256"}],name:"transfer",outputs:[],stateMutability:"payable",type:"function"}],devdoc:{kind:"dev",methods:{},version:1},userdoc:{kind:"user",methods:{},version:1}},me={compilationTarget:{"auction.sol":"Auction"},evmVersion:"london",libraries:{},metadata:{bytecodeHash:"ipfs"},optimizer:{enabled:!1,runs:200},remappings:[]},pe={"auction.sol":{keccak256:"0xb43782e52e72b043f833dd05ac983f6b070af721963b43814c0bde681157d317",license:"Unlicense",urls:["bzz-raw://7b9d5191a60a96e7f473edfbd62e475ac826fefca23c8e2d61f112e8da11b2da","dweb:/ipfs/QmVPuftAAqNULMf8CvgwaGakD5t4X6d7McXTJjWFEot4Z6"]}},he=1;var ge={compiler:le,language:ue,output:de,settings:me,sources:pe,version:he};const ye=ce.output.abi,fe="0x00D54481498C01f1a4236Fe6a9C91e5402aF01A2",_="PREV_PATH",be="0x7b7da4BAACE398236Ab331546cDDAa25E5368979",Te=ge.output.abi,W=e=>{const o=e.length;return`${e.slice(0,Math.floor(o/4))}...${e.slice(e.length-Math.floor(o/4))}`},M=()=>{const o=new P(ethereum).getSigner();return new L(fe,ye,o)},I=()=>{const o=new P(ethereum).getSigner();return new L(be,Te,o)},b=(e,o)=>{Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:c=>{c.addEventListener("mouseenter",Swal.stopTimer),c.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({icon:e,title:o})},T=x((e,o)=>({loading:!1,currentAccount:"",checkIfWalletIsConnect:async()=>e(async()=>{try{if(!ethereum)return alert("Please install MetaMask.");const n=await ethereum.request({method:"eth_accounts"});n.length?e({currentAccount:n[0]}):(e({currentAccount:""}),b("error","No Account found"))}catch(n){b("error",n.message)}}),connectWallet:()=>e(async()=>{e({loading:!0});try{if(!ethereum)return b("error","Please install MetaMask");const n=await ethereum.request({method:"eth_requestAccounts"});e({currentAccount:n[0],loading:!1}),Swal.fire("Successfully")}catch(n){console.log(n),e({loading:!1})}})})),t=D.exports.jsx,s=D.exports.jsxs,E=D.exports.Fragment,$=[{name:"Transaction",active:!1,path:"/"},{name:"Counter",active:!1,path:"/counter"},{name:"Auction",active:!1,path:"/auction"}],ve=()=>{const[e,o]=g.exports.useState($);let n=j();const{currentAccount:c,checkIfWalletIsConnect:r}=T(u=>u),a=J();return g.exports.useEffect(()=>{r();const u=[...$];u.map((d,m)=>{d.active=d.path===a.pathname}),o(u)},[c,a.pathname]),s("header",{className:"d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom",children:[s(X,{to:"/",className:"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none",children:[t("img",{src:"/src/favicon.svg",alt:"",style:{width:"35px"}}),t("span",{className:"fs-4",children:W(c)})]}),t("ul",{className:"nav nav-pills",children:e.map((u,d)=>t("li",{className:"nav-item",children:t(Ne,{className:`nav-link ${u.active?"active":""}`,onClick:()=>{const m=[...$];m.map((h,l)=>{h.active=l===d}),o(m),localStorage.setItem(_,u.path),n(u.path)},children:u.name})},u.name+d))})]})},Ne=F.a`
    cursor: pointer;
`,we=e=>s("div",{className:"container",children:[t(ve,{}),t("div",{className:"row pt-5",children:e.children})]});const Ce=x((e,o)=>({transactions:[],transactionCount:0,loading:!1,getAllTransactions:()=>e(async()=>{try{if(ethereum){const r=(await M().getAllTransactions()).map(a=>({addressTo:a.receiver,addressFrom:a.sender,timestamp:new Date(a.timestamp.toNumber()*1e3).toLocaleString(),message:a.message,keyword:a.keyword,amount:parseInt(a.amount._hex)/10**18}));e({transactions:r.reverse(),transactionCount:r.length})}else b("error","Ethereum is not present")}catch(n){b("error",n.message)}}),sendTransaction:(n,c,r,a,u)=>e(async d=>{try{if(!ethereum)return alert("Please install metamask.");const m=M(),h=R(r);await ethereum.request({method:"eth_sendTransaction",params:[{from:n,to:c,value:h._hex}]});const l=await m.addToBlockchain(c,h,u,a);e({loading:!0}),await l.wait(),d.getAllTransactions(),e({loading:!1}),Swal.fire("Successfully")}catch(m){b("error",m.message)}})})),Ae=()=>{const{transactions:e,transactionCount:o,loading:n,sendTransaction:c,getAllTransactions:r}=Ce(l=>l),{currentAccount:a}=T(l=>l);g.exports.useEffect(()=>{a&&r()},[a]);const[u,d]=g.exports.useState({addressTo:"",amount:"",keyword:"",message:""}),m=(l,f)=>{d(y=>S(A({},y),{[f]:l.target.value}))},h=async l=>{l.preventDefault();const{addressTo:f,amount:y,keyword:N,message:w}=u;!f||!y||!N||!w||await c(a,f,y,N,w)};return s(E,{children:[t("div",{className:"col-6",children:s("form",{children:[s("div",{className:"mb-3",children:[t("label",{htmlFor:"addressTo",className:"form-label",children:"Address To"}),t("input",{type:"text",id:"addressTo",className:"form-control",placeholder:"Address To",value:u.addressTo,onChange:l=>m(l,"addressTo")})]}),s("div",{className:"mb-3",children:[t("label",{htmlFor:"amount",className:"form-label",children:"Amount (ETH)"}),t("input",{type:"number",id:"amount",className:"form-control",placeholder:"Amount (ETH)",value:u.amount,onChange:l=>m(l,"amount")})]}),s("div",{className:"mb-3",children:[t("label",{htmlFor:"keyword",className:"form-label",children:"Keyword (GIF)"}),t("input",{type:"text",id:"keyword",className:"form-control",placeholder:"Keyword (GIF)",value:u.keyword,onChange:l=>m(l,"keyword")})]}),s("div",{className:"mb-3",children:[t("label",{htmlFor:"enterMessage",className:"form-label",children:"Enter Message"}),t("input",{type:"text",id:"enterMessage",className:"form-control",placeholder:"Enter Message",value:u.message,onChange:l=>m(l,"message")})]}),n?t("div",{className:"d-flex justify-content-center",children:t("div",{className:"spinner-border",role:"status",children:t("span",{className:"visually-hidden",children:"Loading..."})})}):t("div",{className:"col-lg-2 offset-lg-5 btn-group",role:"group",children:t("button",{type:"button",className:"btn btn-block btn-outline-success",onClick:l=>h(l),children:"Send"})})]})}),t(xe,{className:"col-6",children:e.length!==0&&s("div",{className:"row",children:[s("h3",{children:["All Transactions (",o,")"]}),e.map((l,f)=>s("div",{className:"card border-dark mb-3",children:[t("div",{className:"card-header",children:s(q,{children:["From: ",W(l.addressFrom)]})}),s("div",{className:"card-body text-dark",children:[t("h6",{className:"card-title",children:s(q,{children:["AddressTo: ",l.addressTo]})}),t("div",{className:"card-text",children:s("ul",{children:[s("li",{children:["Timestamp: ",l.timestamp]}),s("li",{children:["Message: ",l.message]}),s("li",{children:["Amount: ",l.amount]}),s("li",{children:["Keyword: ",l.keyword]})]})})]})]},f)),t("hr",{})]})})]})},q=F.div`
    cursor: pointer;

    :hover {
        text-decoration: underline;
    }
`,xe=F.div`
    height: 33em;
    overflow: auto;
`,ke=x((e,o)=>({counter:0,loading:!1,getCounter:()=>e(async()=>{e({loading:!0});try{if(ethereum){const c=await M().getCounter();e({counter:c.toNumber()})}}catch(n){console.log(n)}e({loading:!1})}),updateCounter:n=>e(async c=>{e({loading:!0});try{if(!ethereum)return b("error","Please install metamask.");const r=M();let a;n?a=await r.decreaseCounter():a=await r.increaseCounter(),console.log(`Loading - ${a.hash}`),await a.wait(),console.log(`Success - ${a.hash}`),c.getCounter()}catch{}e({loading:!1})})})),Me=()=>{const{updateCounter:e,loading:o,counter:n,getCounter:c}=ke(a=>a),{currentAccount:r}=T(a=>a);return g.exports.useEffect(()=>{r&&c()},[r]),t(E,{children:s("div",{className:"col-lg-12 pt-5",children:[s("div",{className:"alert alert-primary",role:"alert",children:["Counter: ",n]}),t("div",{className:"row col-lg-6 offset-lg-3",children:t("div",{className:"btn-group",children:o?t("div",{className:"d-flex text-center mx-auto my-auto",children:t("div",{className:"spinner-border",role:"status",children:t("span",{className:"visually-hidden",children:"Loading..."})})}):s(E,{children:[t("button",{type:"button",className:"btn btn-block btn-outline-success",onClick:()=>e(!1),children:"Increase CounterTest"}),t("button",{type:"button",className:"btn btn-block btn-outline-success",onClick:()=>e(!0),children:"Decrease CounterTest"})]})})})]})})},Ie=x((e,o)=>({auctions:[],auctionCounter:0,loading:!1,getAllAuction:()=>e(async n=>{e({loading:!0});try{if(ethereum){let c=[];const r=I(),a=await r.auctionCounter();for(let u=1;u<=a;u++){const d=await r.auctions(u);!d.isEnded&&c.push(d)}e({auctionCounter:a.toNumber(),auctions:c})}}catch(c){console.log(c)}e({loading:!1})}),bid:(n,c)=>e(async r=>{e({loading:!0});try{ethereum&&(await(await I().Bid(n.auctionID,c)).wait(),r.getAllAuction())}catch(a){console.log(a)}e({loading:!1})}),endBid:n=>e(async c=>{e({loading:!0});try{if(ethereum){const r=I(),a=R(n.amount.toString());await ethereum.request({method:"eth_sendTransaction",params:[{from:n.highestBid,to:n.owner,value:a._hex}]}),await(await r.transfer(n.auctionID)).wait(),c.getAllAuction()}}catch(r){console.log(r)}e({loading:!1})}),addNewAuction:(n,c,r,a)=>e(async u=>{e({loading:!0});try{ethereum&&(await(await I().addNewAuction(r,n,c,a)).wait(),u.getAllAuction())}catch(d){console.log(d)}e({loading:!1})})})),Ee=()=>{const{getAllAuction:e,auctions:o,auctionCounter:n,bid:c,endBid:r,loading:a,addNewAuction:u}=Ie(i=>i),[d,m]=g.exports.useState({}),{currentAccount:h}=T(i=>i),[l,f]=g.exports.useState({image:"",info:"",amount:"",endTime:""});g.exports.useEffect(()=>{h&&e()},[h]);const y=(i,p)=>{f(v=>S(A({},v),{[p]:i.target.value}))},N=async i=>{i.preventDefault();const{image:p,info:v,amount:C,endTime:O}=l;await u(p,v,C,O)},w=i=>{const p=new Date(i*1e3);return`${p.getDate()}/${p.getMonth()+1}/${p.getFullYear()} ${p.getHours()}:${p.getMinutes()}:${p.getSeconds()}`};return s(E,{children:[t("div",{className:"col-6",children:s("form",{children:[s("div",{className:"mb-3",children:[t("label",{htmlFor:"Image",className:"form-label",children:"Image"}),t("input",{type:"text",id:"Image",className:"form-control",placeholder:"Image",value:l.image,onChange:i=>y(i,"image")})]}),s("div",{className:"mb-3",children:[t("label",{htmlFor:"info",className:"form-label",children:"Info"}),t("input",{type:"text",id:"info",className:"form-control",placeholder:"Info",value:l.info,onChange:i=>y(i,"info")})]}),s("div",{className:"mb-3",children:[t("label",{htmlFor:"amount",className:"form-label",children:"Amount (ETH)"}),t("input",{type:"text",id:"amount",className:"form-control",placeholder:"Amount (ETH)",value:l.amount,onChange:i=>y(i,"amount")})]}),s("div",{className:"mb-3",children:[t("label",{htmlFor:"endTime",className:"form-label",children:"End Time"}),t("input",{type:"text",id:"endTime",className:"form-control",placeholder:"End Time",value:l.endTime,onChange:i=>y(i,"endTime")})]}),a?t("div",{className:"d-flex justify-content-center",children:t("div",{className:"spinner-border",role:"status",children:t("span",{className:"visually-hidden",children:"Loading..."})})}):t("div",{className:"col-lg-2 offset-lg-5 btn-group",role:"group",children:t("button",{type:"button",className:"btn btn-block btn-outline-success",onClick:i=>N(i),children:"Send"})})]})}),s("div",{className:"col-6",children:["Auction Counter: ",n,o.length!==0&&o.map(i=>s("ul",{children:[s("li",{children:["Highest: ",i.highestBid]}),s("li",{children:["Owner: ",i.owner]}),s("li",{children:["Amount: ",i.amount.toNumber()]}),s("li",{children:["Image: ",i.image]}),s("li",{children:["Info: ",i.info]}),s("li",{children:["End Time: ",w(i.endTime.toNumber())]}),s("div",{className:"input-group mb-3",children:[t("input",{type:"text",className:"form-control",placeholder:"Amount","aria-label":"Amount",value:d[`amount${i.auctionID.toNumber()}`]||"","aria-describedby":`amount${i.auctionID.toNumber()}`,onChange:p=>{const v=p.target.value,C=A({},d);C[`amount${i.auctionID.toNumber()}`]=v,m(C)}}),s("div",{className:"btn-group",children:[t("button",{className:"btn btn-outline-success",type:"button",id:`amount${i.auctionID.toNumber()}1`,onClick:()=>{c(i,d[`amount${i.auctionID.toNumber()}`])},children:"Bid"}),h.toLowerCase()===i.highestBid.toLowerCase()&&t("button",{className:"btn btn-outline-primary",type:"button",id:`amount${i.auctionID.toNumber()}2`,onClick:()=>{r(i)},children:"End"})]})]})]},i.auctionID.toNumber()))]})]})},Se=()=>{const{currentAccount:e,checkIfWalletIsConnect:o,connectWallet:n}=T(c=>c);return g.exports.useEffect(()=>{o()},[e]),t("div",{className:"row col-lg-6 offset-lg-3 text-center",children:t("button",{type:"submit",className:"btn btn-primary",onClick:n,children:"Connect to MetaMask"})})},De=()=>{const{currentAccount:e}=T(n=>n),o=j();return g.exports.useEffect(()=>{o(e?localStorage.getItem(_)||"":"/login")},[e]),s(Y,{children:[t(k,{index:!0,element:t(Ae,{})}),t(k,{path:"/counter",element:t(Me,{})}),t(k,{path:"/auction",element:t(Ee,{})}),t(k,{path:"/login",element:t(Se,{})})]})};Z.render(t(Q.StrictMode,{children:t(ee,{children:t(we,{children:t(De,{})})})}),document.getElementById("root"));
